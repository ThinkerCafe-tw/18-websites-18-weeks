# 第六講:美容院會員網站(下) - 登入、點數與優惠系統

## 單元目標

◆ 掌握會員登入系統的設計與實作(簡訊驗證或生日驗證)  
◆ 學會建立自動化點數累積與管理機制  
◆ 設計會員專屬優惠與點數兌換系統  
◆ 完成商業級會員系統並理解接案定價策略

---

## 主文

### 6-1 會員登入系統:安全與便利的平衡

**一、為什麼需要登入功能?**

(一)回顧第 5 講的成果

上週我們完成了:
- ✓ 會員可以註冊(填寫姓名、手機、Email)
- ✓ 資料存入 Supabase 資料庫
- ✓ 老闆可以在後台查看所有會員

**但還缺了什麼?**

```
場景:會員王小美第二次來店

王小美:「我是會員,想看看我有多少點數。」

櫃檯人員:「好的,請問您的手機號碼?」

王小美:「0912-345-678」

櫃檯人員(查詢系統):「您目前有 50 點。」

王小美:「可是...我怎麼知道你查的是我的資料?萬一別人也說這支號碼呢?」
```

**問題點**:
- ✗ 沒有身份驗證,任何人都能查別人的點數
- ✗ 會員無法「自己」查詢,必須透過櫃檯
- ✗ 沒有隱私保護(手機號碼就能看到所有資料)

**我們需要「登入功能」!**

---

(二)會員登入的兩種策略

在商業系統中,登入方式有很多種,但對美容院這類小型店家,我們推薦兩種最實用的:

**策略 A:簡訊驗證碼(推薦,但需成本)**

```
流程:
1. 會員輸入手機號碼
2. 系統發送 6 位數驗證碼到手機
3. 會員輸入驗證碼
4. 驗證成功,登入完成
```

**優點**:
- ✓ 安全性高(只有手機主人能收到驗證碼)
- ✓ 使用體驗好(不用記密碼)
- ✓ 符合現代使用習慣(像銀行 APP)

**缺點**:
- ✗ 需要簡訊服務(每則約 0.3-1 元)
- ✗ 需要串接簡訊 API(稍微複雜一點)

**策略 B:生日驗證(免費,本講採用)**

```
流程:
1. 會員輸入手機號碼
2. 會員輸入生日(註冊時填寫的)
3. 系統比對是否正確
4. 驗證成功,登入完成
```

**優點**:
- ✓ 完全免費(不需要簡訊服務)
- ✓ 實作簡單(只是資料庫比對)
- ✓ 對小型店家夠用

**缺點**:
- ✗ 安全性較低(生日可能被猜到)
- ✗ 需要會員記得自己填的生日

**本講選擇策略 B 的理由**:
1. 學習目的:先學會邏輯,簡訊 API 之後可以升級
2. 成本考量:小型美容院初期不用花簡訊費
3. 實用性:對 80% 的場景已經夠用

---

**二、登入系統的核心邏輯**

(一)資料表需要新增欄位

回顧第 5 講建立的 `members` 資料表,我們需要新增一個欄位:

```
新增欄位:
- birthday (生日)
  - 類型:日期 (DATE)
  - 用途:登入時的驗證密碼
  - 必填
```

**為什麼要新增?**

第 5 講時我們只收集了:姓名、手機、Email
但沒有任何「可以驗證身份」的資料
→ 所以要補上生日欄位

---

(二)登入流程設計

**步驟 1:輸入手機號碼**
```
會員輸入:0912-345-678
系統檢查:這支手機有註冊嗎?
- 如果沒有 → 顯示「此手機號碼尚未註冊」
- 如果有 → 進入下一步
```

**步驟 2:輸入生日**
```
會員輸入:1990-05-20
系統檢查:生日正確嗎?
- 到資料庫查詢這支手機的生日欄位
- 比對是否一致
- 如果不對 → 顯示「生日錯誤,請重新輸入」
- 如果正確 → 登入成功
```

**步驟 3:顯示會員資訊**
```
登入成功後,顯示:
- 會員姓名
- 目前點數
- 累積消費金額
- 可兌換的優惠
- 消費紀錄(如果有)
```

---

### 6-2 點數自動累積:讓會員看見「進度條」

**三、點數系統的商業邏輯**

(一)為什麼要用「點數」而不是「折扣」?

很多店家會直接給折扣:
```
消費滿 1000 元打 9 折
消費滿 3000 元打 8 折
```

**這種方式的問題**:
- ✗ 客人不覺得累積有意義(每次都是折扣,沒有驚喜)
- ✗ 沒有「差一點就達成」的感覺
- ✗ 客人不會為了達標而多消費

**點數系統的優勢**:
```
消費 100 元 = 1 點
累積 100 點 = 可換免費療程
```

- ✓ 有明確的「進度條」(現在 85 點,再 15 點就達標!)
- ✓ 產生「收集慾望」(點數會累積,像在打電動升級)
- ✓ 刺激回購(「我差一點點就能換了,再來一次吧」)

**心理學原理**:
這叫做「進度效應」(Goal Gradient Effect)
→ 當人們看到目標快達成時,會更有動力完成

---

(二)點數規則設計

**基本規則**:
```
消費 100 元 = 1 點
消費 250 元 = 2 點(不是 2.5 點,要無條件捨去)
消費 1500 元 = 15 點
```

**為什麼用 100:1 的比例?**
- 容易計算(客人和櫃檯都好算)
- 有成就感(不會點數太少)
- 好調整(之後可以改成 50:1 或 200:1)

**特殊規則(可選)**:
```
- 生日當月消費:雙倍點數
- 首次消費:贈送 50 點(註冊禮)
- VIP 會員(累積消費滿 10 萬):每次 1.5 倍點數
```

---

**四、點數累積的實作邏輯**

(一)資料表需要的欄位

回顧我們的 `members` 資料表,已經有:
- `points` (目前點數)
- `total_spent` (累積消費金額)

這兩個欄位就夠用了!

**當會員消費時,系統要做的事**:
1. 計算這次消費可以得到多少點
2. 把點數加到 `points` 欄位
3. 把消費金額加到 `total_spent` 欄位
4. 更新 `last_visit` (最後來店時間)

---

(二)消費與點數累積流程

**場景:王小美來做美白療程,消費 2800 元**

```
步驟 1:會員登入
- 王小美輸入手機號碼 + 生日
- 系統確認身份
- 顯示目前點數:50 點

步驟 2:選擇療程
- 選擇「美白療程」
- 價格:2800 元
- 系統計算:2800 ÷ 100 = 28 點

步驟 3:確認消費
- 顯示摘要:
  消費金額:2800 元
  可獲得點數:28 點
  消費後總點數:50 + 28 = 78 點
- 王小美確認

步驟 4:系統更新資料
- 到 Supabase 更新王小美的資料:
  points: 50 → 78 (+28)
  total_spent: 0 → 2800 (+2800)
  last_visit: 2025-11-14

步驟 5:顯示結果
- 「消費完成!」
- 「您獲得 28 點,目前共 78 點」
- 「再 22 點就能兌換免費深層清潔囉!」
```

**關鍵**:
最後那句「再 22 點就能兌換」是重點!
→ 讓客人看到「下一個目標」,產生再來的動機

---

### 6-3 會員專屬優惠:點數的變現機制

**五、優惠系統的設計原則**

(一)好的優惠設計要考慮什麼?

**原則 1:階梯式設計**

```
❌ 不好的設計:
- 滿 500 點可以換任何東西

✅ 好的設計:
- 滿 100 點:免費深層清潔(價值 800 元)
- 滿 300 點:美白療程 8 折(原價 2800 元)
- 滿 500 點:任選療程免費(價值 3000 元內)
```

**為什麼要階梯式?**
- 讓客人「一直有新目標」
- 達成小目標後會想繼續累積大目標
- 不同消費能力的客人都有適合的目標

---

**原則 2:優惠要「超值感」**

```
計算方式:
- 100 點 = 消費 10,000 元才能累積
- 換免費深層清潔(價值 800 元)
- 回饋率 = 800 ÷ 10,000 = 8%

一般商業的會員回饋率:
- 一般商店:3-5%
- 餐飲業:5-8%
- 美容業:8-12% (因為毛利率高)
```

**建議回饋率**:
- 100 點換 800-1000 元的服務
- 讓客人覺得「好划算!」
- 但店家還是有賺(因為成本更低)

---

**原則 3:優惠要有「到期壓力」**

```
❌ 點數永久有效 → 客人不急著用,慢慢累積

✅ 點數有效期 1 年 → 客人會想「快到期了,趕快用掉」
```

**到期提醒機制**:
```
當點數即將在 30 天內到期:
- 系統自動發簡訊或 Email
- 「您有 150 點即將在 6/30 到期,記得使用喔!」
- 讓客人想起「我還有點數」,促進回購
```

---

(二)美容院的優惠範例

**優惠方案設計**:

```
【入門級 - 100 點】
- 免費深層清潔 1 次(價值 800 元)
- 或折抵 500 元現金

【進階級 - 300 點】
- 美白療程 8 折(原價 2800 元,折後 2240 元,省 560 元)
- 或任選療程折抵 1500 元

【VIP 級 - 500 點】
- 任選療程免費 1 次(價值 3000 元內)
- 或升級 VIP 會員資格(永久享 95 折)
```

**為什麼這樣設計?**

1. **100 點門檻低**:
   - 消費 10,000 元就能達成
   - 新會員有「第一次兌換」的成就感
   - 讓客人「上癮」,想繼續累積

2. **300 點是主戰場**:
   - 消費 30,000 元,大約 10-15 次
   - 是「忠實客戶」的指標
   - 給的優惠要夠好,留住他們

3. **500 點是長期目標**:
   - 消費 50,000 元,大約 20-30 次
   - 是「超級 VIP」
   - 讓他們有「最高等級」的榮譽感

---

**六、點數兌換頁面的設計**

(一)頁面功能規劃

**會員登入後,看到的畫面**:

```
┌────────────────────────────────┐
│  歡迎回來,王小美!              │
│                                │
│  目前點數: 78 點               │
│  累積消費: NT$ 2,800           │
│  會員等級: 一般會員            │
│                                │
│  ────────────────────────      │
│                                │
│  【可兌換優惠】                │
│                                │
│  ✓ 免費深層清潔                │
│    需要 100 點 (您還差 22 點)  │
│    [再消費 2,200 元可達成]     │
│                                │
│  ✗ 美白療程 8 折               │
│    需要 300 點 (您還差 222 點) │
│                                │
│  ✗ 任選療程免費                │
│    需要 500 點 (您還差 422 點) │
│                                │
└────────────────────────────────┘
```

**設計重點**:
- 用 ✓ 和 ✗ 清楚標示「可以換」vs「還不能換」
- 顯示「還差多少點」→ 讓客人知道目標
- 顯示「需要再消費多少」→ 更具體的行動指引

---

(二)兌換流程設計

**當王小美累積到 100 點時**:

```
步驟 1:選擇要兌換的優惠
- 點擊「免費深層清潔」
- 系統檢查:點數夠嗎?(100 ≥ 100,OK!)

步驟 2:確認兌換
- 顯示確認畫面:
  「確定要用 100 點兌換『免費深層清潔』嗎?」
  兌換後剩餘點數:0 點
  [確認兌換] [取消]

步驟 3:系統扣點
- 王小美點擊「確認兌換」
- 系統更新資料庫:
  points: 100 → 0 (-100)
- 產生兌換紀錄(記錄她換了什麼)

步驟 4:顯示兌換憑證
- 「兌換成功!」
- 顯示兌換憑證:
  兌換編號:R202511140001
  優惠內容:免費深層清潔 1 次
  有效期限:2025-12-14
  [立即預約] [稍後使用]
```

**關鍵設計**:
- 兌換後要有「憑證」→ 證明她真的換了
- 設定有效期限 → 讓客人趕快來用
- 提供「立即預約」按鈕 → 串接回第 4 講的預約系統

---

### 6-4 完整系統整合與接案建議

**七、把所有功能串起來**

(一)完整的使用者旅程

```
【第一次來店】
1. 櫃檯人員:「要不要加入會員?註冊送 50 點喔!」
2. 客人:「好啊!」
3. 填寫資料:姓名、手機、生日、Email
4. 註冊完成:獲得 50 點
5. 選擇療程:美白療程 2800 元
6. 消費完成:再獲得 28 點,總共 78 點
7. 系統提示:「再 22 點就能換免費療程喔!」

【第二次來店(一個月後)】
1. 客人:「我要用會員優惠」
2. 登入:輸入手機 + 生日
3. 系統顯示:目前 78 點
4. 客人:「我想做深層清潔」
5. 消費:800 元,獲得 8 點
6. 消費後:86 點
7. 系統提示:「再 14 點就能兌換囉!只要再消費 1400 元」

【第三次來店(兩週後)】
1. 客人:「我來兌換免費療程!」
2. 登入:已有 86 點
3. 先消費:做護膚 1500 元,獲得 15 點
4. 消費後:101 點
5. 兌換:用 100 點換「免費深層清潔」
6. 剩餘:1 點
7. 系統:「您已兌換成功,下次來店可免費享受深層清潔」

【第四次來店(下個月)】
1. 客人:「我要用免費療程」
2. 出示兌換憑證:R202511140001
3. 免費享受深層清潔
4. 系統:「這次免費,要不要再加購其他療程?」
5. 客人:「好,再加美白」
6. 消費:2800 元,獲得 28 點
7. 總點數:29 點,開始下一輪累積...
```

**這就是「會員飛輪」**:
註冊 → 消費 → 累積點數 → 看到進度 → 想達標 → 再次消費 → 兌換優惠 → 覺得超值 → 繼續消費

---

**八、系統功能檢查清單**

完成第 5 講 + 第 6 講後,你應該有:

**✓ 會員管理功能**
```
□ 會員註冊(姓名、手機、生日、Email)
□ 會員登入(手機 + 生日驗證)
□ 會員資料修改
□ 管理後台(查看所有會員)
```

**✓ 點數系統**
```
□ 消費自動累積點數(100 元 = 1 點)
□ 顯示目前點數
□ 顯示累積消費金額
□ 顯示「距離下個目標還差多少」
```

**✓ 優惠兌換**
```
□ 顯示可兌換的優惠列表
□ 階梯式優惠(100/300/500 點)
□ 點數扣除與兌換紀錄
□ 兌換憑證產生
```

**✓ 使用者體驗**
```
□ 手機版介面友善
□ 操作流程順暢
□ 錯誤提示清楚
□ 成功訊息有成就感
```

---

**九、接案定價策略**

(一)完整系統的價值分析

**你完成的系統包含**:

| 功能模組 | 市場價值 | 開發時間(傳統) | AI 協作時間 |
|---------|---------|--------------|------------|
| 會員註冊系統 | 8千-1.5萬 | 3-5 天 | 2 小時 |
| 會員登入系統 | 1萬-2萬 | 5-7 天 | 2 小時 |
| 點數累積系統 | 1.5萬-2.5萬 | 5-7 天 | 3 小時 |
| 優惠兌換系統 | 1萬-2萬 | 3-5 天 | 2 小時 |
| 管理後台 | 5千-1萬 | 2-3 天 | 1 小時 |
| **總計** | **4萬-8萬** | **18-27 天** | **10 小時** |

**關鍵數據**:
- 傳統開發:至少 3-4 週
- AI 協作開發:2 天(分散做,每天 5 小時)
- **效率提升:10 倍以上**

---

(二)報價建議

**小型美容院(1-2 家分店)**:
```
基礎版:NT$ 35,000-45,000
- 包含所有功能
- Supabase 免費方案(前 5 萬會員免費)
- 教育訓練 2 小時
- 1 個月技術支援
```

**中型連鎖(3-10 家分店)**:
```
專業版:NT$ 60,000-80,000
- 所有功能 + 多店管理
- 各分店獨立後台
- 總部統一查看所有分店數據
- 升級 Supabase Pro 方案(包含第一年)
- 教育訓練 4 小時
- 3 個月技術支援
```

**大型連鎖(10+ 家分店)**:
```
企業版:NT$ 120,000 起
- 所有功能 + 客製化需求
- 串接簡訊 API(自動通知)
- 串接 LINE Bot(會員可用 LINE 查詢)
- 數據分析報表
- 每季更新功能
- 1 年技術支援
```

---

(三)報價的關鍵話術

**與客戶溝通時,這樣說**:

```
「這套會員系統,如果找傳統工程師開發,
 至少要 3-4 週,費用大約 8-12 萬。

 我用 AI 協作開發,可以在 2 天內完成,
 品質一樣,價格只要 4 萬。

 而且根據業界數據,導入會員系統後:
 - 客戶回購率提升 66%
 - 客單價提升 27%
 - 首月就能回本

 等於是花 4 萬,每個月多賺 8-12 萬,
 這個投資報酬率非常高。」
```

**重點**:
- 不要說「我很快做完」→ 客戶會覺得不值錢
- 要說「傳統要更貴更久,我幫你省錢省時」
- 強調「商業價值」而非「技術難度」

---

**十、系統的升級路徑**

(一)未來可以加的功能

當客戶用了半年,覺得很好用,你可以提案:

**升級 A:簡訊通知系統(+1萬)**
```
- 會員消費後自動發簡訊
- 點數快到期時自動提醒
- 生日當月發送優惠簡訊
```

**升級 B:LINE Bot 整合(+2萬)**
```
- 會員加 LINE 好友,直接查詢點數
- 用 LINE 就能預約療程
- 自動推播優惠訊息
```

**升級 C:數據分析儀表板(+1.5萬)**
```
- 每月自動產生經營報表
- 哪些會員最有價值(RFM 分析)
- 哪些療程最受歡迎
- 哪個時段來客最多
```

**升級 D:APP 化(+5萬起)**
```
- 做成獨立的 APP(iOS + Android)
- 可以推播通知
- 更好的使用體驗
```

**策略**:
- 先做基礎版(4-6 萬)
- 客戶用得好,3-6 個月後提案升級
- 每次升級 1-2 萬,持續獲利

---

### 6-5 提示詞模板實戰

**十一、完成第 6 講功能的三個模板**

(一)提示詞模板 4:新增生日欄位

**複製以下指令,貼給 Claude**:

```
【補充會員資料表:新增生日欄位】

我需要在現有的 members 資料表中新增一個欄位,用於會員登入驗證。

請幫我執行以下修改:

1. 新增欄位:
   - 欄位名稱:birthday
   - 類型:DATE
   - 用途:會員生日(登入驗證用)
   - 必填:NOT NULL
   - 預設值:無(會員註冊時必須填寫)

2. 更新註冊頁面:
   - 在現有的註冊表單中加入「生日」欄位
   - 使用日期選擇器(Date Picker)
   - 限制:只能選擇過去的日期(不能選未來)
   - 必填欄位,要標示紅色星號 *

3. 驗證規則:
   - 會員必須年滿 18 歲才能註冊
   - 如果未滿 18 歲,顯示「需年滿 18 歲才能註冊會員」

請確認修改完成後,顯示更新後的資料表結構。
```

**預期產出**:
- members 資料表多了 birthday 欄位
- 註冊頁面多了生日選擇
- 有年齡驗證邏輯

---

(二)提示詞模板 5:建立會員登入頁面

**複製以下指令,貼給 Claude**:

```
【建立會員登入頁面】

請幫我建立一個會員登入頁面,使用手機號碼 + 生日作為驗證方式。

【頁面設計】
1. 視覺風格:
   - 與註冊頁面一致(粉紅色系 #ec4899)
   - 溫柔、專業

2. 表單欄位:
   - 手機號碼:10 碼數字,必填
   - 生日:日期選擇,必填

3. 頁面結構:
   - 頂部:「會員登入」標題
   - 中間:登入表單
   - 底部:「還不是會員?立即註冊」連結

【登入邏輯】
1. 驗證手機號碼:
   - 檢查格式(10 碼,09 開頭)
   - 到 Supabase 查詢:這支手機有註冊嗎?
   - 如果沒有註冊:顯示「此手機號碼尚未註冊,請先註冊」
   - 如果有註冊:繼續驗證生日

2. 驗證生日:
   - 比對資料庫中這支手機的生日欄位
   - 如果不符合:顯示「生日錯誤,請重新輸入」
   - 連續錯誤 3 次:鎖定 5 分鐘(防止暴力破解)

3. 登入成功:
   - 儲存登入狀態(用 sessionStorage)
   - 跳轉到會員頁面
   - 顯示歡迎訊息:「歡迎回來,[姓名]!」

【安全性考量】
- 密碼欄位要用圓點遮蔽(type="password")
- 登入狀態保持 1 小時,之後需要重新登入
- 如果關閉瀏覽器,需要重新登入

請使用 React + Tailwind CSS 製作。
```

**預期產出**:
- 完整的登入頁面
- 手機 + 生日驗證邏輯
- 登入狀態管理
- 錯誤提示友善

---

(三)提示詞模板 6:建立會員頁面(點數與優惠)

**複製以下指令,貼給 Claude**:

```
【建立會員頁面:顯示點數與優惠】

請幫我建立一個會員專屬頁面,會員登入後可以看到自己的點數和可兌換的優惠。

【頁面設計】
1. 頂部會員資訊卡片:
   - 背景:粉紅色漸層
   - 內容:
     * 歡迎詞:「歡迎回來,[姓名]!」
     * 目前點數:(大字顯示,例:78 點)
     * 累積消費:NT$ [金額]
     * 會員等級:[一般會員/VIP 會員]
     * 註冊天數:[X] 天

2. 點數進度條:
   - 顯示「距離下個目標」的進度
   - 例:「再 22 點就能兌換免費療程」
   - 用視覺化進度條顯示(0-100 點,目前 78%)

3. 可兌換優惠列表:
   - 用卡片式呈現
   - 每個優惠包含:
     * 優惠名稱(例:免費深層清潔)
     * 需要點數(例:100 點)
     * 狀態:(✓ 可兌換 / ✗ 還差 X 點)
     * 兌換按鈕(可兌換時顯示,不可時顯示灰色)

【優惠設定】
請建立三個階梯式優惠:

1. 入門級(100 點):
   - 名稱:免費深層清潔
   - 價值:NT$ 800
   - 描述:可享受一次完整的深層清潔療程

2. 進階級(300 點):
   - 名稱:美白療程 8 折
   - 價值:省 NT$ 560
   - 描述:美白療程原價 2800 元,享 8 折優惠

3. VIP 級(500 點):
   - 名稱:任選療程免費
   - 價值:NT$ 3000 內
   - 描述:可免費享受價值 3000 元內的任一療程

【兌換功能】
當會員點擊「兌換」按鈕時:
1. 彈出確認視窗:
   「確定要用 [X] 點兌換『[優惠名稱]』嗎?」
   「兌換後剩餘點數:[Y] 點」
   [確認] [取消]

2. 確認後:
   - 扣除對應點數
   - 產生兌換紀錄(包含:兌換編號、優惠內容、兌換時間)
   - 顯示兌換憑證
   - 更新 Supabase 資料庫

3. 兌換成功畫面:
   - 顯示大大的 ✓
   - 「兌換成功!」
   - 兌換編號:R[日期時間]
   - 優惠內容:[詳細說明]
   - 有效期限:30 天
   - [立即預約] [稍後使用] 按鈕

【消費紀錄】
頁面底部顯示最近 5 筆消費紀錄:
- 消費日期
- 消費金額
- 獲得點數
- 消費項目(如有)

【手機版優化】
- 在手機上,資訊卡片要可以左右滑動
- 優惠列表改成垂直排列
- 按鈕要夠大,方便點擊

請使用 React + Tailwind CSS 製作,從 Supabase 讀取會員資料。
```

**預期產出**:
- 美觀的會員頁面
- 點數與優惠清楚顯示
- 進度條視覺化
- 完整的兌換流程
- 兌換憑證系統

---

(四)提示詞模板 7:建立消費記錄功能

**複製以下指令,貼給 Claude**:

```
【建立消費記錄功能】

我需要一個功能,讓櫃檯人員可以記錄會員的消費,並自動累積點數。

【建立新資料表:transactions】

請在 Supabase 建立一個名為 "transactions" 的資料表,用於記錄所有消費:

1. id:UUID,自動生成,主鍵
2. member_id:UUID,對應 members 資料表的 id(外鍵)
3. amount:INTEGER,消費金額
4. points_earned:INTEGER,獲得的點數
5. service_name:TEXT,服務項目名稱(選填)
6. created_at:TIMESTAMP,消費時間
7. staff_name:TEXT,服務人員姓名(選填)

【建立消費登記頁面】

這個頁面是給櫃檯人員使用的(管理後台的一部分):

1. 頁面功能:
   - 輸入或掃描會員手機號碼
   - 系統自動顯示會員資訊(姓名、目前點數)
   - 輸入本次消費金額
   - 選擇服務項目(下拉選單)
   - 輸入服務人員姓名(選填)

2. 自動計算:
   - 系統自動計算:消費金額 ÷ 100 = 獲得點數(無條件捨去)
   - 顯示:「本次可獲得 [X] 點」
   - 顯示:「消費後總點數:[Y] 點」
   - 如果消費後達到兌換門檻,顯示:
     「恭喜!達到 100 點,可以兌換免費療程了!」

3. 確認按鈕:
   - 點擊「確認消費」按鈕
   - 顯示確認視窗:
     「確認登記消費:NT$ [金額]
      會員:[姓名]
      獲得點數:[X] 點」
     [確認] [取消]

4. 系統執行:
   (a) 新增一筆資料到 transactions 資料表
   (b) 更新 members 資料表:
       - points: 加上新獲得的點數
       - total_spent: 加上本次消費金額
       - last_visit: 更新為當前時間
   (c) 顯示成功訊息:
       「消費登記完成!
        [姓名] 獲得 [X] 點
        目前總點數:[Y] 點」

【消費紀錄查詢】
在管理後台增加一個頁面,可以:
- 查看所有消費紀錄
- 按日期篩選
- 按會員篩選
- 顯示:日期、會員姓名、金額、點數、服務項目
- 可以匯出 CSV(之後可能需要)

請使用 React + Tailwind CSS 製作,並連接 Supabase。
```

**預期產出**:
- transactions 資料表建立完成
- 櫃檯消費登記頁面
- 自動計算點數邏輯
- 更新會員資料功能
- 消費紀錄查詢後台

---

**十二、測試完整流程**

完成所有模板後,務必做一次完整測試:

**完整測試腳本**:

```
【測試 1:新會員註冊】
1. 打開註冊頁面
2. 填寫:
   - 姓名:測試會員
   - 手機:0900000001
   - 生日:1990-01-01
   - Email:test@test.com
3. 確認註冊成功,獲得 50 點

【測試 2:會員登入】
1. 打開登入頁面
2. 輸入:手機 0900000001,生日 1990-01-01
3. 登入成功,進入會員頁面
4. 確認顯示:50 點

【測試 3:消費累積點數】
1. 櫃檯人員打開消費登記頁面
2. 輸入手機:0900000001
3. 輸入消費金額:2800
4. 系統顯示:可獲得 28 點
5. 確認消費
6. 回到會員頁面,確認點數變成 78 點

【測試 4:查看可兌換優惠】
1. 會員登入後,查看優惠列表
2. 確認「免費深層清潔」顯示:還差 22 點
3. 確認進度條顯示:78%

【測試 5:達到兌換門檻】
1. 再次消費:2200 元,獲得 22 點
2. 總點數:100 點
3. 確認「免費深層清潔」顯示:✓ 可兌換
4. 確認進度條顯示:100%

【測試 6:兌換優惠】
1. 點擊「兌換」按鈕
2. 確認視窗出現
3. 點擊「確認」
4. 系統扣除 100 點
5. 顯示兌換憑證
6. 確認剩餘點數:0 點

【測試 7:管理後台】
1. 打開管理後台
2. 確認看到測試會員的資料
3. 確認消費紀錄正確
4. 確認統計數字正確
```

---

**十三、恭喜你!完成商業級會員系統**

(一)你的成就

完成第 5 講 + 第 6 講後,你已經:

✅ **掌握 Supabase**:商業級雲端資料庫
✅ **建立會員系統**:註冊、登入、資料管理
✅ **實作點數機制**:自動累積、視覺化進度
✅ **設計優惠系統**:階梯式兌換、憑證管理
✅ **完成後台管理**:會員查詢、消費紀錄
✅ **獲得提示詞模板**:可複製到其他專案

---

(二)系統的商業價值

**這套系統可以**:
- 直接賣給美容院:4-6 萬
- 複製到健身房、瑜伽教室:4-6 萬/套
- 複製到寵物美容、美髮:3-5 萬/套
- 升級功能(簡訊、LINE):+1-2 萬/次

**如果你每個月接 2 個案子**:
- 每個案子 4.5 萬
- 每月收入:9 萬
- 一年收入:108 萬

**而你的時間成本**:
- 每個案子 10-15 小時(AI 協作)
- 等於時薪 3000-4500 元

**這就是 AI 時代的接案模式!**

---

## 重要名詞

◆ **進度效應 (Goal Gradient Effect)**:心理學現象,指當人們看到目標快要達成時,會更有動力去完成。會員系統利用此效應設計點數進度條。

◆ **會員飛輪 (Membership Flywheel)**:客戶從註冊、消費、累積點數、兌換優惠到再次消費的循環機制,形成自我強化的商業模式。

◆ **階梯式優惠 (Tiered Rewards)**:設計多個不同門檻的優惠,讓不同消費能力的會員都有適合的目標,提升整體參與率。

◆ **RFM 分析**:Recency(最近一次消費)、Frequency(消費頻率)、Monetary(消費金額)的會員價值分析方法。

◆ **兌換憑證 (Redemption Voucher)**:會員兌換優惠後產生的證明文件,包含兌換編號、內容、有效期限等資訊。

◆ **客戶終身價值回收期 (CLV Payback Period)**:系統建置成本需要多久才能從提升的客戶價值中回收。

◆ **sessionStorage**:瀏覽器提供的會話儲存空間,關閉分頁後資料就會清除,適合用於短期的登入狀態管理。

---

## 自我評量或問題與討論

1. 請比較「簡訊驗證登入」和「生日驗證登入」的優缺點,並說明在什麼情境下應該選擇簡訊驗證?

2. 為什麼點數系統比直接折扣更能提升客戶忠誠度?請從心理學角度說明「進度效應」。

3. 實作題:假設一家健身房要導入會員系統,點數規則設計為「月費 1000 元 = 10 點」。請設計三個階梯式優惠,並計算每個優惠的回饋率。

4. 商業分析:一家美容院有 500 位會員,平均每人 80 點。如果推出「點數到期」政策(1 年到期),預估會有多少會員因為「快到期」而回來消費?這對營收有什麼影響?

5. 系統設計:如果要加入「VIP 會員(累積消費滿 10 萬)可獲得 1.5 倍點數」的功能,你需要修改哪些地方?請列出資料表欄位和計算邏輯。

---

## 參考文獻/書目

1. Nir Eyal - "Hooked: How to Build Habit-Forming Products" (2014)
2. Harvard Business Review - "The Goal Gradient Hypothesis Resurrected" (2006)
3. Supabase Authentication Documentation:https://supabase.com/docs/guides/auth
4. Nielsen Norman Group - Loyalty Programs Best Practices
5. 台灣美容產業協會 - 會員經營實戰手冊 (2024)